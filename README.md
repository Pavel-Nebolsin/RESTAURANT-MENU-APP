# Y_LAB_MENU_APP

## Тесты
Для запуска приложения с ТЕСТАМИ (пустая база для pytest и postman) корневой директории в консоли выполнить:<br>
`docker-compose -f docker-compose-test.yml up -d`<br>
Когда все контейнеры запустятся, можно запустить тесты командой:<br>
`docker exec crud_tests pytest --color=yes -s -v /app/tests`<br>
(предварительно должен бы установлен <a href="https://www.docker.com/">Docker<a>)
<br>
## Celery task
Для запуска приложения с Celery[RabbitMQ] (с таской читающей excel и апдейтящей бд) в корневой директории в консоли выполнить:<br>
`docker-compose up -d`<br>
`Menu.xlsx` находится в папки admin в контейнере с Celery<br>
- при работе с эксель таблицей, предполагается что при добавлении новых элементов <br>
слева от них будут вписываться новые <a href="https://uuidgen.org/v/4">UUID v4<a>
- а так же предполагается что будет сохраняься правильная структура элементов
- :skull_and_crossbones:осторожно, при чтении алгоритмов выполнения таски может сломаться мозг!:skull_and_crossbones:

### Дополнительно:
#### pre-commit хуки
Все pre-commit хуки и линтеры проходят без ошибок.<br>
Чтобы в этом убедиться, необходимо:
- создать `виртуальное окружение` и уставновить в него все зависимости из `requirements.txt` в корневой директории реппозитория.
- далее там же инициировать `git` командой `git init`
- добавить все файлы командой `git add . `
- установить прекоммит конфиг командой `pre-commit install`
- запустить прекоммит командой `pre-commit run --all-files`
#### Работа с докером:
- Чтобы быстро кильнуть все контейнеры советую использовать команду `docker rm -f $(docker ps -aq)`
- Чтобы поднять контейнеры с учётом изменений в файлах (без кеширования) ` docker-compose up -d --build`
  
